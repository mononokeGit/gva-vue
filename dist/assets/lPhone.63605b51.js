/*! 
 Build based on gin-vue-admin 
 Time : 1678795244000 */
import{r as e,a as l,b as a,o as t,c as u,d,e as o,w as n,h as i,k as r,v as p,C as s,P as m,i as c}from"./index.a10c697d.js";import{g as v,d as f,f as h,a as b,c as y,u as V}from"./lPhone.3f3be470.js";import{f as g}from"./format.7d611a05.js";import"./date.34b11046.js";import"./dictionary.f99b60b8.js";import"./sysDictionary.5409d8a6.js";const _={class:"gva-search-box"},w={class:"gva-table-box"},U={class:"gva-btn-list"},C=d("p",null,"确定要删除吗？",-1),k={style:{"text-align":"right","margin-top":"8px"}},B={class:"gva-pagination"},z={class:"dialog-footer"},I={name:"LPhone"},N=Object.assign(I,{setup(I){const N=e({createdBy:0,deletedBy:0,IPhone:0,lName:"",lNum:0,lOther:"",lTitle:"",lUnit:"",updatedBy:0}),P=l({}),x=e(),T=e(1),O=e(0),j=e(10),D=e([]),M=e({}),A=({prop:e,order:l})=>{M.value.sort=e,M.value.order=l,R()},S=()=>{M.value={},R()},K=()=>{T.value=1,j.value=10,R()},F=e=>{j.value=e,R()},L=e=>{T.value=e,R()},R=async()=>{const e=await v({page:T.value,pageSize:j.value,...M.value});0===e.code&&(D.value=e.data.list,O.value=e.data.total,T.value=e.data.page,j.value=e.data.pageSize)};R();(async()=>{})();const q=e([]),E=e=>{q.value=e},G=e(!1),H=async()=>{const e=[];if(0===q.value.length)return void c({type:"warning",message:"请选择要删除的数据"});q.value&&q.value.map((l=>{e.push(l.ID)}));0===(await f({ids:e})).code&&(c({type:"success",message:"删除成功"}),D.value.length===e.length&&T.value>1&&T.value--,G.value=!1,R())},J=e(""),Q=async e=>{0===(await b({ID:e.ID})).code&&(c({type:"success",message:"删除成功"}),1===D.value.length&&T.value>1&&T.value--,R())},W=e(!1),X=()=>{J.value="create",W.value=!0},Y=()=>{W.value=!1,N.value={createdBy:0,deletedBy:0,IPhone:0,lName:"",lNum:0,lOther:"",lTitle:"",lUnit:"",updatedBy:0}},Z=async()=>{var e;null==(e=x.value)||e.validate((async e=>{if(!e)return;let l;switch(J.value){case"create":default:l=await y(N.value);break;case"update":l=await V(N.value)}0===l.code&&(c({type:"success",message:"创建/更改成功"}),Y(),R())}))};return(e,l)=>{const c=a("el-date-picker"),v=a("el-form-item"),f=a("el-input"),b=a("el-button"),y=a("el-form"),V=a("el-popover"),I=a("el-table-column"),R=a("el-table"),$=a("el-pagination"),ee=a("el-dialog");return t(),u("div",null,[d("div",_,[o(y,{inline:!0,model:M.value,class:"demo-form-inline",onKeyup:r(K,["enter"])},{default:n((()=>[o(v,{label:"创建时间"},{default:n((()=>[o(c,{modelValue:M.value.startCreatedAt,"onUpdate:modelValue":l[0]||(l[0]=e=>M.value.startCreatedAt=e),type:"datetime",placeholder:"开始时间"},null,8,["modelValue"]),i(" — "),o(c,{modelValue:M.value.endCreatedAt,"onUpdate:modelValue":l[1]||(l[1]=e=>M.value.endCreatedAt=e),type:"datetime",placeholder:"结束时间"},null,8,["modelValue"])])),_:1}),o(v,{label:"IPhone字段"},{default:n((()=>[o(f,{modelValue:M.value.IPhone,"onUpdate:modelValue":l[2]||(l[2]=e=>M.value.IPhone=e),modelModifiers:{number:!0},placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),o(v,{label:"领导姓名"},{default:n((()=>[o(f,{modelValue:M.value.lName,"onUpdate:modelValue":l[3]||(l[3]=e=>M.value.lName=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),o(v,{label:"领导序号"},{default:n((()=>[o(f,{modelValue:M.value.lNum,"onUpdate:modelValue":l[4]||(l[4]=e=>M.value.lNum=e),modelModifiers:{number:!0},placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),o(v,{label:"备注"},{default:n((()=>[o(f,{modelValue:M.value.lOther,"onUpdate:modelValue":l[5]||(l[5]=e=>M.value.lOther=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),o(v,{label:"领导职务"},{default:n((()=>[o(f,{modelValue:M.value.lTitle,"onUpdate:modelValue":l[6]||(l[6]=e=>M.value.lTitle=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),o(v,{label:"所属单位"},{default:n((()=>[o(f,{modelValue:M.value.lUnit,"onUpdate:modelValue":l[7]||(l[7]=e=>M.value.lUnit=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),o(v,null,{default:n((()=>[o(b,{size:"small",type:"primary",icon:"search",onClick:K},{default:n((()=>[i("查询")])),_:1}),o(b,{size:"small",icon:"refresh",onClick:S},{default:n((()=>[i("重置")])),_:1})])),_:1})])),_:1},8,["model","onKeyup"])]),d("div",w,[d("div",U,[o(b,{size:"small",type:"primary",icon:"plus",onClick:X},{default:n((()=>[i("新增")])),_:1}),o(V,{visible:G.value,"onUpdate:visible":l[10]||(l[10]=e=>G.value=e),placement:"top",width:"160"},{reference:n((()=>[o(b,{icon:"delete",size:"small",style:{"margin-left":"10px"},disabled:!q.value.length,onClick:l[9]||(l[9]=e=>G.value=!0)},{default:n((()=>[i("删除")])),_:1},8,["disabled"])])),default:n((()=>[C,d("div",k,[o(b,{size:"small",type:"primary",link:"",onClick:l[8]||(l[8]=e=>G.value=!1)},{default:n((()=>[i("取消")])),_:1}),o(b,{size:"small",type:"primary",onClick:H},{default:n((()=>[i("确定")])),_:1})])])),_:1},8,["visible"])]),o(R,{ref:"multipleTable",style:{width:"100%"},"tooltip-effect":"dark",data:D.value,"row-key":"ID",onSelectionChange:E,onSortChange:A},{default:n((()=>[o(I,{type:"selection",width:"55"}),o(I,{align:"left",label:"日期",width:"180"},{default:n((e=>[i(p(s(g)(e.row.CreatedAt)),1)])),_:1}),o(I,{align:"left",label:"创建者",prop:"createdBy",width:"120"}),o(I,{align:"left",label:"删除者",prop:"deletedBy",width:"120"}),o(I,{align:"left",label:"IPhone字段",prop:"IPhone",width:"120"}),o(I,{align:"left",label:"领导姓名",prop:"lName",width:"120"}),o(I,{sortable:"",align:"left",label:"领导序号",prop:"lNum",width:"120"}),o(I,{align:"left",label:"备注",prop:"lOther",width:"120"}),o(I,{align:"left",label:"领导职务",prop:"lTitle",width:"120"}),o(I,{align:"left",label:"所属单位",prop:"lUnit",width:"120"}),o(I,{align:"left",label:"更新者",prop:"updatedBy",width:"120"}),o(I,{align:"left",label:"按钮组"},{default:n((e=>[o(b,{type:"primary",link:"",icon:"edit",size:"small",class:"table-button",onClick:l=>(async e=>{const l=await h({ID:e.ID});J.value="update",0===l.code&&(N.value=l.data.relPhone,W.value=!0)})(e.row)},{default:n((()=>[i("变更")])),_:2},1032,["onClick"]),o(b,{type:"primary",link:"",icon:"delete",size:"small",onClick:l=>{return a=e.row,void m.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{Q(a)}));var a}},{default:n((()=>[i("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),d("div",B,[o($,{layout:"total, sizes, prev, pager, next, jumper","current-page":T.value,"page-size":j.value,"page-sizes":[10,30,50,100],total:O.value,onCurrentChange:L,onSizeChange:F},null,8,["current-page","page-size","total"])])]),o(ee,{modelValue:W.value,"onUpdate:modelValue":l[20]||(l[20]=e=>W.value=e),"before-close":Y,title:"弹窗操作"},{footer:n((()=>[d("div",z,[o(b,{size:"small",onClick:Y},{default:n((()=>[i("取 消")])),_:1}),o(b,{size:"small",type:"primary",onClick:Z},{default:n((()=>[i("确 定")])),_:1})])])),default:n((()=>[o(y,{model:N.value,"label-position":"right",ref_key:"elFormRef",ref:x,rules:P,"label-width":"80px"},{default:n((()=>[o(v,{label:"创建者:",prop:"createdBy"},{default:n((()=>[o(f,{modelValue:N.value.createdBy,"onUpdate:modelValue":l[11]||(l[11]=e=>N.value.createdBy=e),modelModifiers:{number:!0},clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),o(v,{label:"删除者:",prop:"deletedBy"},{default:n((()=>[o(f,{modelValue:N.value.deletedBy,"onUpdate:modelValue":l[12]||(l[12]=e=>N.value.deletedBy=e),modelModifiers:{number:!0},clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),o(v,{label:"IPhone字段:",prop:"IPhone"},{default:n((()=>[o(f,{modelValue:N.value.IPhone,"onUpdate:modelValue":l[13]||(l[13]=e=>N.value.IPhone=e),modelModifiers:{number:!0},clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),o(v,{label:"领导姓名:",prop:"lName"},{default:n((()=>[o(f,{modelValue:N.value.lName,"onUpdate:modelValue":l[14]||(l[14]=e=>N.value.lName=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),o(v,{label:"领导序号:",prop:"lNum"},{default:n((()=>[o(f,{modelValue:N.value.lNum,"onUpdate:modelValue":l[15]||(l[15]=e=>N.value.lNum=e),modelModifiers:{number:!0},clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),o(v,{label:"备注:",prop:"lOther"},{default:n((()=>[o(f,{modelValue:N.value.lOther,"onUpdate:modelValue":l[16]||(l[16]=e=>N.value.lOther=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),o(v,{label:"领导职务:",prop:"lTitle"},{default:n((()=>[o(f,{modelValue:N.value.lTitle,"onUpdate:modelValue":l[17]||(l[17]=e=>N.value.lTitle=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),o(v,{label:"所属单位:",prop:"lUnit"},{default:n((()=>[o(f,{modelValue:N.value.lUnit,"onUpdate:modelValue":l[18]||(l[18]=e=>N.value.lUnit=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),o(v,{label:"更新者:",prop:"updatedBy"},{default:n((()=>[o(f,{modelValue:N.value.updatedBy,"onUpdate:modelValue":l[19]||(l[19]=e=>N.value.updatedBy=e),modelModifiers:{number:!0},clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}}});export{N as default};
