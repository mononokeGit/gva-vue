/*! 
 Build based on gin-vue-admin 
 Time : 1678795244000 */
import{r as e,a as l,b as a,o as u,c as t,d as o,e as d,w as n,h as i,k as s,v as r,C as p,P as m,i as c}from"./index.a10c697d.js";import{g as v,d as f,f as b,a as h,c as g,u as y}from"./phoneNum.ff37cdeb.js";import{f as V}from"./format.7d611a05.js";import"./date.34b11046.js";import"./dictionary.f99b60b8.js";import"./sysDictionary.5409d8a6.js";const _={class:"gva-search-box"},k={class:"gva-table-box"},w={class:"gva-btn-list"},C=o("p",null,"确定要删除吗？",-1),z={style:{"text-align":"right","margin-top":"8px"}},N={class:"gva-pagination"},U={class:"dialog-footer"},x={name:"PhoneNum"},O=Object.assign(x,{emits:["selectdata"],setup(x,{emit:O}){const R=e({uid:"",nOther:"",nBackup:"",nNumber:0,nRes:""}),j=l({}),B=e(),D=e(1),I=e(0),S=e(10),M=e([]),T=e({}),K=()=>{T.value={},q()},P=()=>{D.value=1,S.value=10,q()},A=e=>{S.value=e,q()},F=e=>{D.value=e,q()},q=async()=>{const e=await v({page:D.value,pageSize:S.value,...T.value});0===e.code&&(M.value=e.data.list,I.value=e.data.total,D.value=e.data.page,S.value=e.data.pageSize)};q();(async()=>{})();const E=e([]),G=e=>{E.value=e,O("selectdata",e)},H=e(!1),J=async()=>{const e=[];if(0===E.value.length)return void c({type:"warning",message:"请选择要删除的数据"});E.value&&E.value.map((l=>{e.push(l.ID)}));0===(await f({ids:e})).code&&(c({type:"success",message:"删除成功"}),M.value.length===e.length&&D.value>1&&D.value--,H.value=!1,q())},L=e(""),Q=async e=>{0===(await h({ID:e.ID})).code&&(c({type:"success",message:"删除成功"}),1===M.value.length&&D.value>1&&D.value--,q())},W=e(!1),X=()=>{L.value="create",W.value=!0},Y=()=>{W.value=!1,R.value={uid:"",nOther:"",nBackup:"",nNumber:0,nRes:""}},Z=async()=>{var e;null==(e=B.value)||e.validate((async e=>{if(!e)return;let l;switch(L.value){case"create":default:l=await g(R.value);break;case"update":l=await y(R.value)}0===l.code&&(c({type:"success",message:"创建/更改成功"}),Y(),q())}))};return(e,l)=>{const c=a("el-input"),v=a("el-form-item"),f=a("el-col"),h=a("el-button"),g=a("el-row"),y=a("el-form"),x=a("el-popover"),O=a("el-table-column"),q=a("el-table"),$=a("el-pagination"),ee=a("el-dialog");return u(),t("div",null,[o("div",_,[d(y,{inline:!0,model:T.value,class:"demo-form-inline",onKeyup:s(P,["enter"])},{default:n((()=>[d(g,null,{default:n((()=>[d(v,{label:"标识符"},{default:n((()=>[d(c,{modelValue:T.value.uid,"onUpdate:modelValue":l[0]||(l[0]=e=>T.value.uid=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),d(v,{label:"备注"},{default:n((()=>[d(c,{modelValue:T.value.nOther,"onUpdate:modelValue":l[1]||(l[1]=e=>T.value.nOther=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),d(v,{label:"号码"},{default:n((()=>[d(f,{span:11},{default:n((()=>[d(c,{modelValue:T.value.startNNumber,"onUpdate:modelValue":l[2]||(l[2]=e=>T.value.startNNumber=e),modelModifiers:{number:!0},placeholder:"搜索条件（起）"},null,8,["modelValue"])])),_:1}),d(f,{span:1},{default:n((()=>[i("—")])),_:1}),d(f,{span:11},{default:n((()=>[d(c,{modelValue:T.value.endNNumber,"onUpdate:modelValue":l[3]||(l[3]=e=>T.value.endNNumber=e),modelModifiers:{number:!0},placeholder:"搜索条件（止）"},null,8,["modelValue"])])),_:1})])),_:1}),d(v,{label:"分配的人或科室"},{default:n((()=>[d(c,{modelValue:T.value.nRes,"onUpdate:modelValue":l[4]||(l[4]=e=>T.value.nRes=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),d(v,null,{default:n((()=>[d(h,{size:"small",type:"primary",icon:"search",onClick:P},{default:n((()=>[i("查询")])),_:1}),d(h,{size:"small",icon:"refresh",onClick:K},{default:n((()=>[i("重置")])),_:1})])),_:1})])),_:1})])),_:1},8,["model","onKeyup"])]),o("div",k,[o("div",w,[d(h,{size:"small",type:"primary",icon:"plus",onClick:X},{default:n((()=>[i("新增")])),_:1}),d(x,{visible:H.value,"onUpdate:visible":l[7]||(l[7]=e=>H.value=e),placement:"top",width:"160"},{reference:n((()=>[d(h,{icon:"delete",size:"small",style:{"margin-left":"10px"},disabled:!E.value.length,onClick:l[6]||(l[6]=e=>H.value=!0)},{default:n((()=>[i("删除")])),_:1},8,["disabled"])])),default:n((()=>[C,o("div",z,[d(h,{size:"small",type:"primary",link:"",onClick:l[5]||(l[5]=e=>H.value=!1)},{default:n((()=>[i("取消")])),_:1}),d(h,{size:"small",type:"primary",onClick:J},{default:n((()=>[i("确定")])),_:1})])])),_:1},8,["visible"])]),d(q,{ref:"multipleTable",style:{width:"100%"},"tooltip-effect":"dark",data:M.value,"row-key":"ID",onSelectionChange:G},{default:n((()=>[d(O,{type:"selection",width:"55"}),d(O,{align:"left",label:"日期",width:"180"},{default:n((e=>[i(r(p(V)(e.row.CreatedAt)),1)])),_:1}),d(O,{align:"left",label:"号码",prop:"nNumber",width:"auto"}),d(O,{align:"left",label:"标识符",prop:"uid",width:"auto"}),d(O,{align:"left",label:"备注",prop:"nOther",width:"auto"}),d(O,{align:"left",label:"分配的人或科室",prop:"nRes",width:"auto"}),d(O,{align:"left",label:"按钮组",width:"auto"},{default:n((e=>[d(h,{type:"primary",link:"",icon:"edit",size:"small",class:"table-button",onClick:l=>(async e=>{const l=await b({ID:e.ID});L.value="update",0===l.code&&(R.value=l.data.rephoneNum,W.value=!0)})(e.row)},{default:n((()=>[i("变更")])),_:2},1032,["onClick"]),d(h,{type:"primary",link:"",icon:"delete",size:"small",onClick:l=>{return a=e.row,void m.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{Q(a)}));var a}},{default:n((()=>[i("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),o("div",N,[d($,{layout:"total, sizes, prev, pager, next, jumper","current-page":D.value,"page-size":S.value,"page-sizes":[10,30,50,100],total:I.value,onCurrentChange:F,onSizeChange:A},null,8,["current-page","page-size","total"])])]),d(ee,{modelValue:W.value,"onUpdate:modelValue":l[13]||(l[13]=e=>W.value=e),"before-close":Y,title:"弹窗操作"},{footer:n((()=>[o("div",U,[d(h,{size:"small",onClick:Y},{default:n((()=>[i("取 消")])),_:1}),d(h,{size:"small",type:"primary",onClick:Z},{default:n((()=>[i("确 定")])),_:1})])])),default:n((()=>[d(y,{model:R.value,"label-position":"right",ref_key:"elFormRef",ref:B,rules:j,"label-width":"80px"},{default:n((()=>[d(v,{label:"标识符:",prop:"uid"},{default:n((()=>[d(c,{modelValue:R.value.uid,"onUpdate:modelValue":l[8]||(l[8]=e=>R.value.uid=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),d(v,{label:"备注:",prop:"nOther"},{default:n((()=>[d(c,{modelValue:R.value.nOther,"onUpdate:modelValue":l[9]||(l[9]=e=>R.value.nOther=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),d(v,{label:"预留字段:",prop:"nBackup"},{default:n((()=>[d(c,{modelValue:R.value.nBackup,"onUpdate:modelValue":l[10]||(l[10]=e=>R.value.nBackup=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),d(v,{label:"号码:",prop:"nNumber"},{default:n((()=>[d(c,{modelValue:R.value.nNumber,"onUpdate:modelValue":l[11]||(l[11]=e=>R.value.nNumber=e),modelModifiers:{number:!0},clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),d(v,{label:"分配的人或科室:",prop:"nRes"},{default:n((()=>[d(c,{modelValue:R.value.nRes,"onUpdate:modelValue":l[12]||(l[12]=e=>R.value.nRes=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}}});export{O as default};
