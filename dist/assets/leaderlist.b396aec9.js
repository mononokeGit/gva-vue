/*! 
 Build based on gin-vue-admin 
 Time : 1678795244000 */
import{r as e,a as l,b as a,o as t,c as u,d as o,e as i,w as d,h as n,k as r,v as s,P as p,i as m}from"./index.a10c697d.js";import{g as v,d as c,f,a as h,c as b,u as g}from"./lPnum.28f8d26e.js";import"./date.34b11046.js";import"./dictionary.f99b60b8.js";import"./sysDictionary.5409d8a6.js";const y={class:"gva-btn-list"},V=o("p",null,"确定要删除吗？",-1),_={style:{"text-align":"right","margin-top":"8px"}},w={class:"gva-pagination"},U={class:"dialog-footer"},k={name:"leaderlist"},z=Object.assign(k,{setup(k){const z=e({IPhone:0,lName:"",lNum:0,lOther:"",lTitle:"",lUnit:""}),C=l({}),I=e(),N=e(1),P=e(0),T=e(5),x=e([]),O=e({}),j=()=>{O.value={},B()},D=()=>{N.value=1,T.value=10,B()},S=e=>{T.value=e,B()},M=e=>{N.value=e,B()},B=async()=>{const e=await v({page:N.value,pageSize:T.value,...O.value});0===e.code&&(x.value=e.data.list,P.value=e.data.total,N.value=e.data.page,T.value=e.data.pageSize)};B();(async()=>{})();const K=e([]),F=e=>{K.value=e},R=e(!1),q=async()=>{const e=[];if(0===K.value.length)return void m({type:"warning",message:"请选择要删除的数据"});K.value&&K.value.map((l=>{e.push(l.ID)}));0===(await c({ids:e})).code&&(m({type:"success",message:"删除成功"}),x.value.length===e.length&&N.value>1&&N.value--,R.value=!1,B())},A=e(""),E=async e=>{0===(await h({ID:e.ID})).code&&(m({type:"success",message:"删除成功"}),1===x.value.length&&N.value>1&&N.value--,B())},G=e(!1),H=()=>{A.value="create",G.value=!0},J=()=>{G.value=!1,z.value={IPhone:0,lName:"",lNum:0,lOther:"",lTitle:"",lUnit:""}},L=async()=>{var e;null==(e=I.value)||e.validate((async e=>{if(!e)return;let l;switch(A.value){case"create":default:l=await b(z.value);break;case"update":l=await g(z.value)}0===l.code&&(m({type:"success",message:"创建/更改成功"}),J(),B())}))};return(e,l)=>{const m=a("el-input"),v=a("el-form-item"),c=a("el-button"),h=a("el-form"),b=a("el-popover"),g=a("el-table-column"),k=a("el-table"),B=a("el-pagination"),Q=a("el-dialog");return t(),u("div",null,[o("div",null,[i(h,{inline:!0,model:O.value,class:"demo-form-inline",onKeyup:r(D,["enter"])},{default:d((()=>[i(v,{label:"领导姓名"},{default:d((()=>[i(m,{modelValue:O.value.lName,"onUpdate:modelValue":l[0]||(l[0]=e=>O.value.lName=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),i(v,{label:"所属单位"},{default:d((()=>[i(m,{modelValue:O.value.lUnit,"onUpdate:modelValue":l[1]||(l[1]=e=>O.value.lUnit=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),i(v,{label:"职务"},{default:d((()=>[i(m,{modelValue:O.value.lTitle,"onUpdate:modelValue":l[2]||(l[2]=e=>O.value.lTitle=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),i(v,{label:"电话号码"},{default:d((()=>[i(m,{modelValue:O.value.IPhone,"onUpdate:modelValue":l[3]||(l[3]=e=>O.value.IPhone=e),modelModifiers:{number:!0},placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),i(v,{label:"备注"},{default:d((()=>[i(m,{modelValue:O.value.lOther,"onUpdate:modelValue":l[4]||(l[4]=e=>O.value.lOther=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),i(v,null,{default:d((()=>[i(c,{size:"small",type:"primary",icon:"search",onClick:D},{default:d((()=>[n("查询")])),_:1}),i(c,{size:"small",icon:"refresh",onClick:j},{default:d((()=>[n("重置")])),_:1})])),_:1})])),_:1},8,["model","onKeyup"])]),o("div",null,[o("div",y,[i(c,{size:"small",type:"primary",icon:"plus",onClick:H},{default:d((()=>[n("新增")])),_:1}),i(b,{visible:R.value,"onUpdate:visible":l[7]||(l[7]=e=>R.value=e),placement:"top",width:"160"},{reference:d((()=>[i(c,{icon:"delete",size:"small",style:{"margin-left":"10px"},disabled:!K.value.length,onClick:l[6]||(l[6]=e=>R.value=!0)},{default:d((()=>[n("删除")])),_:1},8,["disabled"])])),default:d((()=>[V,o("div",_,[i(c,{size:"small",type:"primary",link:"",onClick:l[5]||(l[5]=e=>R.value=!1)},{default:d((()=>[n("取消")])),_:1}),i(c,{size:"small",type:"primary",onClick:q},{default:d((()=>[n("确定")])),_:1})])])),_:1},8,["visible"])]),o("div",null,[i(k,{ref:"multipleTable",style:{width:"100%"},"tooltip-effect":"dark",data:x.value,"row-key":"ID",onSelectionChange:F},{default:d((()=>[i(g,{type:"selection",width:"55"}),i(g,{sortable:"",align:"left",label:"序号",prop:"lNum",width:"120"}),i(g,{align:"left",label:"领导姓名",prop:"lName",width:"120"}),i(g,{align:"left",label:"职务",prop:"lTitle",width:"auto","show-overflow-tooltip":""}),i(g,{align:"left",label:"所属单位",prop:"lUnit",width:"auto"}),i(g,{align:"left",label:"号码",prop:"IPhone",width:"120"}),i(g,{align:"left",label:"备注",prop:"lOther",width:"auto"}),i(g,{align:"left",label:"操作",width:"auto"},{default:d((e=>[i(c,{type:"primary",link:"",icon:"edit",size:"small",class:"table-button",onClick:l=>(async e=>{const l=await f({ID:e.ID});A.value="update",0===l.code&&(z.value=l.data.relPhone,G.value=!0)})(e.row)},{default:d((()=>[n("变更")])),_:2},1032,["onClick"]),i(c,{type:"primary",link:"",icon:"delete",size:"small",onClick:l=>{return a=e.row,void p.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{E(a)}));var a}},{default:d((()=>[n("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])]),o("div",w,[i(B,{layout:"total, sizes, prev, pager, next, jumper","current-page":N.value,"page-size":T.value,"page-sizes":[5,10,15,20,30,50,100],total:P.value,onCurrentChange:M,onSizeChange:S},null,8,["current-page","page-size","total"])])]),n(" "+s(K.value)+" ",1),i(Q,{modelValue:G.value,"onUpdate:modelValue":l[14]||(l[14]=e=>G.value=e),"before-close":J,title:"弹窗操作"},{footer:d((()=>[o("div",U,[i(c,{size:"small",type:"primary",onClick:L},{default:d((()=>[n("确 定")])),_:1}),i(c,{size:"small",onClick:J},{default:d((()=>[n("取 消")])),_:1})])])),default:d((()=>[i(v,{label:"领导序号:",prop:"lNum"},{default:d((()=>[i(m,{modelValue:z.value.lNum,"onUpdate:modelValue":l[8]||(l[8]=e=>z.value.lNum=e),modelModifiers:{number:!0},clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),i(v,{label:"领导姓名:",prop:"lName"},{default:d((()=>[i(m,{modelValue:z.value.lName,"onUpdate:modelValue":l[9]||(l[9]=e=>z.value.lName=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),i(v,{label:"领导职务:",prop:"lTitle"},{default:d((()=>[i(m,{modelValue:z.value.lTitle,"onUpdate:modelValue":l[10]||(l[10]=e=>z.value.lTitle=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),i(v,{label:"所属单位:",prop:"lUnit"},{default:d((()=>[i(m,{modelValue:z.value.lUnit,"onUpdate:modelValue":l[11]||(l[11]=e=>z.value.lUnit=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),i(h,{model:z.value,"label-position":"right",ref_key:"elFormRef",ref:I,rules:C,"label-width":"80px"},{default:d((()=>[i(v,{label:"号码:",prop:"IPhone"},{default:d((()=>[i(m,{modelValue:z.value.IPhone,"onUpdate:modelValue":l[12]||(l[12]=e=>z.value.IPhone=e),modelModifiers:{number:!0},clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),i(v,{label:"备注:",prop:"lOther"},{default:d((()=>[i(m,{modelValue:z.value.lOther,"onUpdate:modelValue":l[13]||(l[13]=e=>z.value.lOther=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}}});export{z as default};
