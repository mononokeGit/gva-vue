/*! 
 Build based on gin-vue-admin 
 Time : 1678795244000 */
import{g as e,f as l,d as a,c as t,u}from"./meetcalendar.bacd960f.js";import"./date.34b11046.js";import"./dictionary.f99b60b8.js";import o from"./leaderlist.b396aec9.js";import{r as d,a as n,H as s,b as r,o as m,c as p,d as i,e as v,w as c,h as f,n as b,v as y,F as V,t as _,m as g,f as h,P as w,i as D}from"./index.a10c697d.js";import"./sysDictionary.5409d8a6.js";import"./lPnum.28f8d26e.js";const k={style:{display:"inline-flex","align-items":"center"}},U={class:"dialog-footer"},x={name:"Meetcalendar"},T=Object.assign(x,{setup(x){const T=d({mDate:new Date,mRoom:0,mType:"",title:"",stime:new Date,ptime:0,leader:"",mleader:"",amount:0,level:"",resposen:"",route:"",remark:""}),z=n({}),M=d(),j=d(1),S=d(0),C=d(10),R=d([]),F=d({});(async()=>{const l=await e({page:j.value,pageSize:C.value,...F.value});0===l.code&&(R.value=l.data.list,S.value=l.data.total,j.value=l.data.page,C.value=l.data.pageSize)})();const I=d(new Date),O=d([]),Y=async()=>{const l=d(new Date(I.value.getFullYear(),I.value.getMonth(),1)),a=d(new Date(I.value.getFullYear(),I.value.getMonth()+1,0,23,59,59)),t=d({});var u=6e4*l.value.getTimezoneOffset();t.value.startMDate=new Date(l.value-u).toISOString(),u=6e4*a.value.getTimezoneOffset(),t.value.endMDate=new Date(a.value-u).toISOString();const o=await e({page:1,pageSize:100,...t.value});O.value=o.data.list};s(I,Y,{immediate:!0});const B=e=>{const l=new Date(e),a=l.getFullYear(),t=l.getMonth(),u=l.getDate();return O.value.filter((e=>{const l=new Date(e.mDate);return l.getFullYear()===a&&l.getMonth()===t&&l.getDate()===u}))},P=[{value:"本地会",label:"本地会"},{value:"视频会",label:"视频会"},{value:"接待会",label:"接待会"},{value:"借用",label:"借用"},{value:"其他",label:"其他"}],H=[{value:"zytx",label:"zytx"},{value:"联通线路",label:"联通线路"},{value:"全省综合会议系统",label:"全省综合会议系统"},{value:"山东通",label:"山东通"},{value:"会商系统",label:"会商系统"},{value:"人社专线",label:"人社专线"},{value:"其他",label:"其他"}],L=n({"本地会":"","视频会":"danger","接待会":"success","借用":"warning","其他":"info"});(async()=>{})(),d([]);d(!1);const q=d(""),A=async e=>{0===(await a({ID:e.ID})).code&&(D({type:"success",message:"删除成功"}),1===R.value.length&&j.value>1&&j.value--,Y())},E=d(!1),G=()=>{q.value="create",E.value=!0},J=()=>{E.value=!1,T.value={mDate:new Date,mRoom:0,mType:"",title:"",stime:new Date,ptime:0,leader:"",mleader:"",amount:0,level:"",resposen:"",route:"",remark:""}},K=async()=>{var e;null==(e=M.value)||e.validate((async e=>{if(!e)return;let l;switch(q.value){case"create":default:l=await t(T.value);break;case"update":l=await u(T.value)}0===l.code&&(D({type:"success",message:"创建/更改成功"}),J(),Y())}))};return(e,a)=>{const t=r("el-statistic"),u=r("el-col"),d=r("ChatLineRound"),n=r("el-icon"),s=r("el-row"),D=r("el-card"),x=r("el-button"),j=r("el-tag"),S=r("el-calendar"),C=r("el-date-picker"),R=r("el-form-item"),F=r("el-input"),O=r("el-option"),Y=r("el-select"),N=r("el-form"),Q=r("el-dialog");return m(),p("div",null,[i("div",null,[v(D,{class:"box-card"},{default:c((()=>[v(s,null,{default:c((()=>[v(u,{span:6},{default:c((()=>[v(t,{title:"本月会议总量",value:352})])),_:1}),v(u,{span:6},{default:c((()=>[v(t,{value:138},{title:c((()=>[i("div",k,[f(" 视频会/接待会 "),v(n,{style:{"margin-left":"4px"},size:12},{default:c((()=>[v(d)])),_:1})])])),suffix:c((()=>[f("/100")])),_:1})])),_:1}),v(u,{span:6},{default:c((()=>[v(t,{title:"会议时长min",value:172e3})])),_:1}),v(u,{span:6},{default:c((()=>[v(t,{title:"还没想好",value:562},{suffix:c((()=>[v(n,{style:{"vertical-align":"-0.125em"}},{default:c((()=>[v(d)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),v(D,{class:"box-card"},{default:c((()=>[v(x,{class:"add-button",size:"small",type:"primary",icon:"plus",onClick:G},{default:c((()=>[f("新增")])),_:1}),v(S,{modelValue:I.value,"onUpdate:modelValue":a[0]||(a[0]=e=>I.value=e)},{"date-cell":c((({data:e})=>[i("p",{class:b(e.isSelected?"is-selected":"")},[v(s,null,{default:c((()=>[v(u,{span:8},{default:c((()=>[f(y(e.day.split("-").slice(1).join("-")),1)])),_:2},1024),v(u,{span:8},{default:c((()=>[f(y(e.isSelected?"✔️":""),1)])),_:2},1024)])),_:2},1024),(m(!0),p(V,null,_(B(e.day),((e,a)=>(m(),g(j,{type:L[e.mType],key:a,closable:"",onClose:l=>{return a=e,void w.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{A(a)}));var a},onClick:a=>(async e=>{const a=await l({ID:e.ID});q.value="update",0===a.code&&(T.value=a.data.remeetcalendar,E.value=!0)})(e)},{default:c((()=>[f(y(a+1)+"--"+y(e.mRoom)+"--"+y(e.title)+"--"+y(e.mType),1)])),_:2},1032,["type","onClose","onClick"])))),128))],2)])),_:1},8,["modelValue"])])),_:1})]),v(Q,{modelValue:E.value,"onUpdate:modelValue":a[14]||(a[14]=e=>E.value=e),"before-close":J,title:"弹窗操作",width:"80%"},{footer:c((()=>[i("div",U,[v(x,{size:"small",onClick:J},{default:c((()=>[f("取 消")])),_:1}),v(x,{size:"small",type:"primary",onClick:K},{default:c((()=>[f("确 定")])),_:1})])])),default:c((()=>[v(s,null,{default:c((()=>[v(u,{span:7},{default:c((()=>[v(N,{model:T.value,"label-position":"right",ref_key:"elFormRef",ref:M,rules:z,"label-width":"100px"},{default:c((()=>[v(R,{label:"会议日期:",prop:"mDate"},{default:c((()=>[v(C,{modelValue:T.value.mDate,"onUpdate:modelValue":a[1]||(a[1]=e=>T.value.mDate=e),type:"date",style:{width:"100%"},placeholder:"选择日期",clearable:!0},null,8,["modelValue"])])),_:1}),v(R,{label:"会议室:",prop:"mRoom"},{default:c((()=>[v(F,{modelValue:T.value.mRoom,"onUpdate:modelValue":a[2]||(a[2]=e=>T.value.mRoom=e),modelModifiers:{number:!0},clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),v(R,{label:"会议类型:",prop:"mType"},{default:c((()=>[v(Y,{modelValue:T.value.mType,"onUpdate:modelValue":a[3]||(a[3]=e=>T.value.mType=e),class:"m-2",placeholder:"选择会议类型"},{default:c((()=>[(m(),p(V,null,_(P,(e=>v(O,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])),_:1}),"视频会"===T.value.mType?(m(),g(R,{key:0,label:"会议线路:",prop:"route"},{default:c((()=>[v(Y,{modelValue:T.value.route,"onUpdate:modelValue":a[4]||(a[4]=e=>T.value.route=e),class:"m-2",placeholder:"选择视频线路"},{default:c((()=>[(m(),p(V,null,_(H,(e=>v(O,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])),_:1})):h("",!0),v(R,{label:"会议名称:",prop:"title"},{default:c((()=>[v(F,{modelValue:T.value.title,"onUpdate:modelValue":a[5]||(a[5]=e=>T.value.title=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),v(R,{label:"开始时间:",prop:"stime"},{default:c((()=>[v(C,{modelValue:T.value.stime,"onUpdate:modelValue":a[6]||(a[6]=e=>T.value.stime=e),type:"datetime",style:{width:"100%"},placeholder:"选择日期",clearable:!0},null,8,["modelValue"])])),_:1}),v(R,{label:"会议时长:",prop:"ptime"},{default:c((()=>[v(F,{modelValue:T.value.ptime,"onUpdate:modelValue":a[7]||(a[7]=e=>T.value.ptime=e),modelModifiers:{number:!0},clearable:!0,placeholder:"请输入"},{append:c((()=>[f("分钟")])),_:1},8,["modelValue"])])),_:1}),"本地会"!==T.value.mType?(m(),g(R,{key:1,label:"上级领导:",prop:"leader"},{default:c((()=>[v(F,{modelValue:T.value.leader,"onUpdate:modelValue":a[8]||(a[8]=e=>T.value.leader=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1})):h("",!0),v(R,{label:"我区参会领导:",prop:"mleader"},{default:c((()=>[v(F,{modelValue:T.value.mleader,"onUpdate:modelValue":a[9]||(a[9]=e=>T.value.mleader=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),v(R,{label:"参会人数:",prop:"amount"},{default:c((()=>[v(F,{modelValue:T.value.amount,"onUpdate:modelValue":a[10]||(a[10]=e=>T.value.amount=e),modelModifiers:{number:!0},clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),v(R,{label:"会议等级:",prop:"level"},{default:c((()=>[v(F,{modelValue:T.value.level,"onUpdate:modelValue":a[11]||(a[11]=e=>T.value.level=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),v(R,{label:"责任单位:",prop:"resposen"},{default:c((()=>[v(F,{modelValue:T.value.resposen,"onUpdate:modelValue":a[12]||(a[12]=e=>T.value.resposen=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),v(R,{label:"备注:",prop:"remark"},{default:c((()=>[v(F,{modelValue:T.value.remark,"onUpdate:modelValue":a[13]||(a[13]=e=>T.value.remark=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1}),v(u,{span:1}),v(u,{span:16},{default:c((()=>[v(o)])),_:1})])),_:1})])),_:1},8,["modelValue"])])}}});export{T as default};
